# Expected Database Bundle Output

This directory contains the expected Parquet database output generated by the `bundle_database()` function when processing the test extraction data.

## Structure

The database uses hive partitioning to organize access logs:

```
extracted_activity.parquet/
└── asset_type=blobs/
    ├── blob_head=1/
    │   └── 0.parquet
    ├── blob_head=b/
    │   └── 0.parquet
    ├── blob_head=c/
    │   └── 0.parquet
    └── blob_head=f/
        └── 0.parquet
```

### Parquet Schema

Each Parquet file contains these columns:
- `asset_type`: Single character ('b' for blobs, 'z' for zarr)
- `blob_head`: First character of the blob ID (for partitioning)
- `timestamp`: Unix timestamp of the access event
- `blob_index`: Integer index mapping to the full blob ID
- `bytes_sent`: Number of bytes transferred
- `indexed_ip`: Anonymized IP address index

### Blob Index Mapping

The `blob_index_to_id.yaml` file provides the mapping from integer blob indexes to their full 32-character hex blob IDs. This approach reduces storage requirements while maintaining the ability to identify specific assets.

## Data Source

This database is generated from the extraction data in `tests/expected_output/extraction/blobs/`, which contains a subset of the test extraction output reorganized into the blob structure expected by `bundle_database()`.
